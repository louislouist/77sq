TODO::
Write something to handle soc posting. Need something that will handle all the optional data returned from adsb.lol.
Move the db initialization into main();

 triggerUncaughtException(err, true /* fromPromise */);
    ^

[Error: SQLITE_BUSY: database is locked] {
  errno: 5,
  code: 'SQLITE_BUSY'
}
::write to sqlite.
	add to startup the database creation sql.


	errors (id, error_code, type, message, date)
		fetch, db_write(when hex exists but other items are different)

	if hex is missing(MH-uuid);
	SQLite3 for async no-blocking read/write

	//Current:
	sqlite> .schema flights
CREATE TABLE flights (
                        id INTEGER PRIMARY KEY AUTOINCREMENT,
                        squawk TEXT,
                        emergency TEXT,
                        flight TEXT,
                        type TEXT,
                        ctime DATETIME,
                        current_time DATETIME,
                        full_json TEXT,
                        timestamp DATETIME DEFAULT CURRENT_TIMESTAMP
                );

add express display info page.

::Add reddit support
https://www.reddit.com/prefs/apps
	create another app
	choose script
	get client ID, client secret, and set a redirect URI.
Use Snoowrap to for reddit posting.
	npm install snoowrap dotenv

Express routes for viewing aircraft.


Closest Airports
https://developers.amadeus.com/self-service/category/flights/api-doc/airport-nearest-relevant/api-reference
https://aviation-edge.com/nearby-airport-and-city-api/

Reminders::
via indexing 
SELECT * FROM tracking_sessions WHERE session_id = 'abc123';
SELECT * FROM tracking_sessions WHERE aircraft_id = 42;

//first
SELECT * FROM tracking_sessions WHERE session_id = ? ORDER BY seqNr ASC LIMIT 1;
// last
SELECT * FROM tracking_sessions WHERE session_id = ? ORDER BY seqNr DESC LIMIT 1;

Done::
::loop for following emergencies

	start tracking loop.
		set an array that holds hex, count, lastSeen: datetime;
		fetch updateloop runs inside
		 if no hex, set hexID and use that hexID for database, etc
		 if ac[n].hex is in fetch, update count & lastseen: 
		 else if lastseen > 1 hour, remove ac[n].hex;

	if ac > 0... change loop time to every six secconds.
	if ac =< 0... change loop to 1 minute.

	create an array that puts any ac[n].hex into tracking.
		once ac[n].hex leaves the array, for 1 hour that aircraft will not be elegable for socials.
	
	on first sighting to array and not in tracking.array
		post to socials and write console and begin writing each 6 second update to db.
Give tracking an id uuid for tracking the event#
figure out schemas.
	transponder(hex[pk], aircraft_id[fk], source???)
	aircraft(id, hex, registration, tracking[fk], flightNr[fk], date)
	tracking(id, sequenceId, count, json, date)

